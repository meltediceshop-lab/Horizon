{% comment %}
  FOOTER DINÁMICO PRO JGT - TOTALMENTE CONFIGURABLE
  Permite crear secciones y subsecciones escribiendo el texto y el enlace manualmente.
{% endcomment %}

<footer class="jgt-footer-v3" style="background-color: {{ section.settings.bg_color }}; color: {{ section.settings.text_color }};">
  <div class="jgt-footer-container">
    
    <div class="jgt-footer-grid">
      {% for block in section.blocks %}
        <div class="jgt-footer-column" {{ block.shopify_attributes }}>
          
          <div class="jgt-footer-header">
            {% if block.settings.title_link != blank %}
              <a href="{{ block.settings.title_link }}" style="color: inherit; text-decoration: none;">
            {% endif %}
              <h3 class="jgt-footer-h3" style="font-size: {{ section.settings.title_size }}px;">
                {{ block.settings.title }}
              </h3>
            {% if block.settings.title_link != blank %}
              </a>
            {% endif %}
          </div>
          
          {% case block.type %}
            {% when 'custom_links' %}
              <ul class="jgt-footer-list">
                {%- for i in (1..8) -%}
                  {%- capture text_id -%}link_text_{{ i }}{%- endcapture -%}
                  {%- capture url_id -%}link_url_{{ i }}{%- endcapture -%}
                  {%- assign link_text = block.settings[text_id] -%}
                  {%- assign link_url = block.settings[url_id] -%}
                  
                  {%- if link_text != blank -%}
                    <li>
                      <a href="{{ link_url | default: '#' }}" style="font-size: {{ section.settings.link_size }}px; color: {{ section.settings.text_color }};">
                        {{ link_text }}
                      </a>
                    </li>
                  {%- endif -%}
                {%- endfor -%}
              </ul>

            {% when 'menu_column' %}
              <ul class="jgt-footer-list">
                {% if block.settings.menu != blank %}
                  {% for link in block.settings.menu.links %}
                    <li><a href="{{ link.url }}" style="font-size: {{ section.settings.link_size }}px;">{{ link.title }}</a></li>
                  {% endfor %}
                {% endif %}
              </ul>

            {% when 'social_column' %}
              <ul class="jgt-footer-social">
                {% if block.settings.fb_url != blank %}<li><a href="{{ block.settings.fb_url }}">Facebook</a></li>{% endif %}
                {% if block.settings.ig_url != blank %}<li><a href="{{ block.settings.ig_url }}">Instagram</a></li>{% endif %}
                {% if block.settings.tk_url != blank %}<li><a href="{{ block.settings.tk_url }}">Tiktok</a></li>{% endif %}
              </ul>
          {% endcase %}
          
        </div>
      {% endfor %}
    </div>

  </div>

  {% if section.settings.show_float %}
    <div class="jgt-floating-box">
      <a href="{{ section.settings.chat_url }}" class="jgt-float-chat">
        <svg viewBox="0 0 24 24" width="30" height="30"><path fill="currentColor" d="M12 2C6.477 2 2 6.477 2 12c0 1.821.487 3.53 1.338 5L2 22l5-1.338C8.47 21.513 10.179 22 12 22c5.523 0 10-4.477 10-10S17.523 2 12 2z"/></svg>
      </a>
      <a href="https://wa.me/{{ section.settings.wa_number }}" class="jgt-float-wa">
        <svg viewBox="0 0 24 24" width="30" height="30"><path fill="currentColor" d="M12.031 6.172c-3.181 0-5.767 2.586-5.767 5.767 0 1.258.405 2.422 1.093 3.37l-.714 2.605 2.664-.699c.82.505 1.774.794 2.796.794 3.181 0 5.767-2.586 5.767-5.767s-2.586-5.767-5.767-5.767z"/></svg>
      </a>
    </div>
  {% endif %}
</footer>

<style>
  .jgt-footer-v3 { padding: 60px 0; font-family: sans-serif; }
  .jgt-footer-container { max-width: 1400px; margin: 0 auto; padding: 0 40px; }
  .jgt-footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; }
  .jgt-footer-h3 { 
    font-weight: 700; margin-bottom: 20px; padding-bottom: 8px; 
    border-bottom: 2px solid rgba(255,255,255,0.3); display: inline-block;
  }
  .jgt-footer-list, .jgt-footer-social { list-style: none; padding: 0; margin: 0; }
  .jgt-footer-list li { margin-bottom: 12px; }
  .jgt-footer-list a { text-decoration: none; transition: opacity 0.2s; }
  .jgt-footer-list a:hover { opacity: 0.7; }
  
  .jgt-floating-box { position: fixed; bottom: 20px; left: 20px; right: 20px; display: flex; justify-content: space-between; pointer-events: none; z-index: 999; }
  .jgt-float-chat, .jgt-float-wa { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; pointer-events: auto; box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
  .jgt-float-chat { background-color: #1a5a7a; }
  .jgt-float-wa { background-color: #25d366; }
</style>

{% schema %}
{
  "name": "Footer Dinámico JGT PRO",
  "settings": [
    { "type": "color", "id": "bg_color", "label": "Color Fondo", "default": "#002266" },
    { "type": "color", "id": "text_color", "label": "Color Texto", "default": "#ffffff" },
    { "type": "range", "id": "title_size", "min": 14, "max": 24, "step": 1, "unit": "px", "label": "Tamaño Títulos", "default": 18 },
    { "type": "range", "id": "link_size", "min": 10, "max": 20, "step": 1, "unit": "px", "label": "Tamaño Enlaces", "default": 14 },
    { "type": "header", "content": "Botones Flotantes" },
    { "type": "checkbox", "id": "show_float", "label": "Mostrar Botones", "default": true },
    { "type": "text", "id": "wa_number", "label": "Número WhatsApp" },
    { "type": "url", "id": "chat_url", "label": "URL Chat" }
  ],
  "blocks": [
    {
      "type": "custom_links",
      "name": "Columna Manual (Escribir)",
      "settings": [
        { "type": "text", "id": "title", "label": "Título de la sección", "default": "Nueva Sección" },
        { "type": "url", "id": "title_link", "label": "Enlace del Título" },
        { "type": "text", "id": "link_text_1", "label": "Texto Subsección 1" },
        { "type": "url", "id": "link_url_1", "label": "Enlace Subsección 1" },
        { "type": "text", "id": "link_text_2", "label": "Texto Subsección 2" },
        { "type": "url", "id": "link_url_2", "label": "Enlace Subsección 2" },
        { "type": "text", "id": "link_text_3", "label": "Texto Subsección 3" },
        { "type": "url", "id": "link_url_3", "label": "Enlace Subsección 3" },
        { "type": "text", "id": "link_text_4", "label": "Texto Subsección 4" },
        { "type": "url", "id": "link_url_4", "label": "Enlace Subsección 4" },
        { "type": "text", "id": "link_text_5", "label": "Texto Subsección 5" },
        { "type": "url", "id": "link_url_5", "label": "Enlace Subsección 5" }
      ]
    },
    {
      "type": "menu_column",
      "name": "Columna de Menú (Shopify)",
      "settings": [
        { "type": "text", "id": "title", "label": "Título Sección", "default": "Sección" },
        { "type": "link_list", "id": "menu", "label": "Seleccionar Menú" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Footer Dinámico JGT PRO",
      "blocks": [
        { "type": "custom_links", "settings": { "title": "Quiénes somos" } },
        { "type": "custom_links", "settings": { "title": "Atención al cliente" } }
      ]
    }
  ]
}
{% endschema %}