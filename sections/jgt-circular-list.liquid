{% comment %} Sección de lista circular de categorías {% endcomment %}
<div class="jgt-circles-section py-8 border-b border-gray-200" style="background-color: {{ section.settings.bg_color }}">
  <div class="container mx-auto px-4">
    {% if section.settings.title != blank %}
    <h2 class="text-center font-bold text-xl mb-6 text-blue-900">{{ section.settings.title }}</h2>
    {% endif %}
    <div class="jgt-circles-flex">
      {% for block in section.blocks %}
        <a href="{{ block.settings.link }}" class="jgt-circle-item group">
          <div class="jgt-circle-img-wrapper">
            {% if block.settings.image != blank %}
              <img src="{{ block.settings.image | image_url: width: 120, height: 120, crop: 'center' }}" alt="{{ block.settings.label }}" loading="lazy">
            {% else %}
              {{ 'collection-1' | placeholder_svg_tag: 'jgt-placeholder' }}
            {% endif %}
          </div>
          <span class="jgt-circle-label group-hover:text-blue-700">{{ block.settings.label }}</span>
        </a>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .jgt-circles-section { padding: 30px 0; border-bottom: 1px solid #eee; }
  .jgt-circles-flex { display: flex; flex-wrap: wrap; justify-content: center; gap: 25px; }
  .jgt-circle-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; width: 100px; }
  .jgt-circle-img-wrapper { 
    width: 90px; height: 90px; border-radius: 50%; overflow: hidden; 
    border: 2px solid transparent; transition: border-color 0.3s;
    background-color: #f0f0f0; display: flex; align-items: center; justify-content: center;
  }
  .jgt-circle-item:hover .jgt-circle-img-wrapper { border-color: #002266; }
  .jgt-circle-img-wrapper img { width: 100%; height: 100%; object-fit: cover; }
  .jgt-circle-label { 
    margin-top: 10px; font-size: 13px; font-weight: 600; color: #333; 
    text-align: center; line-height: 1.2; transition: color 0.3s;
  }
  .jgt-circle-item:hover .jgt-circle-label { color: #002266; }
  .jgt-placeholder { width: 60%; height: 60%; fill: #ccc; }

  @media (max-width: 640px) {
    .jgt-circles-flex { justify-content: flex-start; overflow-x: auto; padding-bottom: 15px; /* Scroll lateral en móvil */ }
    .jgt-circle-item { flex: 0 0 auto; }
  }
</style>

{% schema %}
{
  "name": "JGT Lista Circular",
  "settings": [
    { "type": "text", "id": "title", "label": "Título de sección (Opcional)" },
    { "type": "color", "id": "bg_color", "label": "Color de fondo", "default": "#ffffff" }
  ],
  "blocks": [
    {
      "type": "category_circle",
      "name": "Círculo Categoría",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Imagen (Se recortará circular)" },
        { "type": "text", "id": "label", "label": "Etiqueta", "default": "Categoría" },
        { "type": "url", "id": "link", "label": "Enlace" }
      ]
    }
  ],
  "presets": [
    {
      "name": "JGT Lista Circular",
      "blocks": [
        { "type": "category_circle" },
        { "type": "category_circle" },
        { "type": "category_circle" },
        { "type": "category_circle" }
      ]
    }
  ]
}
{% endschema %}